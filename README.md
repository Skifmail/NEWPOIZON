# üöÄ Poizon to WordPress Sync

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Poizon –≤ WooCommerce —Å AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –æ–ø–∏—Å–∞–Ω–∏–π**

[![Python 3.10+](https://img.shields.io/badge/python-3.10+-blue.svg)](https://www.python.org/downloads/)
[![Flask](https://img.shields.io/badge/Flask-3.0.0-green.svg)](https://flask.palletsprojects.com/)
[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞ **Poizon** (Dewu) –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω –Ω–∞ **WordPress/WooCommerce**.

### ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîç **–£–º–Ω—ã–π –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, –±—Ä–µ–Ω–¥–∞–º –∏ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
- ü§ñ **AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è SEO-–∫–æ–Ω—Ç–µ–Ω—Ç–∞** —á–µ—Ä–µ–∑ OpenAI GPT (—Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫)
- üì∏ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π** (–∑–∞–≥—Ä—É–∑–∫–∞, —Ä–µ—Å–∞–π–∑, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- üí∞ **–ì–∏–±–∫–∏–π —Ä–∞—Å—á–µ—Ç —Ü–µ–Ω** (–∫—É—Ä—Å –≤–∞–ª—é—Ç—ã + –Ω–∞—Ü–µ–Ω–∫–∞ –≤ —Ä—É–±–ª—è—Ö)
- üè∑Ô∏è **–í–∞—Ä–∏–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤** (—Ä–∞–∑–º–µ—Ä—ã, —Ü–≤–µ—Ç–∞) —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º
- üìä **Real-time –ø—Ä–æ–≥—Ä–µ—Å—Å** –∑–∞–≥—Ä—É–∑–∫–∏ —á–µ—Ä–µ–∑ Server-Sent Events
- ‚ö° **–í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** (3-—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ, Circuit Breaker, async)
- üîÑ **–§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞** —á–µ—Ä–µ–∑ Celery (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
```
Flask Web App
‚îú‚îÄ‚îÄ Poizon API Client (–ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤)
‚îú‚îÄ‚îÄ OpenAI GPT (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏–π)
‚îú‚îÄ‚îÄ WooCommerce REST API (–∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤)
‚îî‚îÄ‚îÄ File Cache (–ª–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ)
```

### –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Å Redis + Celery)
```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  Flask Web  ‚îÇ
                    ‚îÇ     App     ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                  ‚îÇ                  ‚îÇ
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ  Unified  ‚îÇ    ‚îÇ   Circuit   ‚îÇ   ‚îÇ    Celery   ‚îÇ
  ‚îÇ   Cache   ‚îÇ    ‚îÇ   Breaker   ‚îÇ   ‚îÇ    Worker   ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                                     ‚îÇ
  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
  ‚îÇ   Redis   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    Redis    ‚îÇ
  ‚îÇ  (Cache)  ‚îÇ                       ‚îÇ   (Broker)  ‚îÇ
  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ù–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **UnifiedCache** (`unified_cache.py`)
   - 3-—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: Memory ‚Üí Redis ‚Üí File
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ Redis
   - TTL-based expiration (5 –º–∏–Ω / 24 —á–∞—Å–∞ / 30 –¥–Ω–µ–π)
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–µ—à–∞

2. **Circuit Breaker** (`circuit_breaker.py`)
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ–µ–≤ API
   - 3 —Å–æ—Å—Ç–æ—è–Ω–∏—è: CLOSED ‚Üí OPEN ‚Üí HALF_OPEN
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ (timeout 60 —Å–µ–∫)
   - Graceful degradation (fallback –Ω–∞ –∫–µ—à)

3. **Async HTTP Client** (`async_http_client.py`)
   - –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ aiohttp
   - Connection pooling
   - Automatic retry logic
   - Rate limiting

4. **Celery Tasks** (`celery_tasks.py`)
   - –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
   - Batch upload (–¥–æ 1000 —Ç–æ–≤–∞—Ä–æ–≤)
   - Periodic cleanup tasks
   - Progress tracking

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π | –° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|-----------------|-----------------|-----------|
| –ó–∞–≥—Ä—É–∑–∫–∞ 10 —Ç–æ–≤–∞—Ä–æ–≤ | 2-3 –º–∏–Ω | 30-40 —Å–µ–∫ | **4-6x** |
| –ó–∞–ø—Ä–æ—Å–æ–≤ –∫ Poizon API | 100+ | 15-20 | **-85%** |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ | 250 MB | 180 MB | **-28%** |
| –ú–∞–∫—Å. —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ä–∞–∑ | 50 | 1000 | **20x** |
| Uptime –ø—Ä–∏ —Å–±–æ—è—Ö API | 60% | 80%+ | **+20%** |

–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏: [ANALYSIS_REPORT.md](ANALYSIS_REPORT.md)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows (–ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–±)

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞** (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫):
   ```
   install.bat
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞**: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.env`
   ```env
   WORDPRESS_URL=https://–≤–∞—à-—Å–∞–π—Ç.ru
   WORDPRESS_CONSUMER_KEY=ck_...
   WORDPRESS_CONSUMER_SECRET=cs_...
   OPENAI_API_KEY=sk-...
   ```

3. **–ó–∞–ø—É—Å–∫** (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫):
   ```
   start_app.bat
   ```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä**: http://127.0.0.1:5000
   - –õ–æ–≥–∏–Ω: `admin`
   - –ü–∞—Ä–æ–ª—å: `1q2w3e4r5t6y`

üìñ **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md](–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md)

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (Linux/macOS)

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone <repo-url>
cd poizon-wordpress-sync

# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
pip install -r requirements.txt

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞
cp .env.example .env
nano .env  # –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
python web_app.py

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Redis + Celery
redis-server &
celery -A celery_tasks worker --loglevel=info
```

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ)
```
Flask==3.0.0              # –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
requests==2.31.0          # HTTP –∫–ª–∏–µ–Ω—Ç
python-dotenv==1.0.0      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ .env
Pillow==10.4.0            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
openai==1.59.8            # OpenAI API
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```
redis==5.0.1              # –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ L2
celery==5.5.3             # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
aiohttp==3.13.2           # Async HTTP
```

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: [requirements.txt](requirements.txt)

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (.env)

```env
# WordPress
WORDPRESS_URL=https://–≤–∞—à-—Å–∞–π—Ç.ru
WORDPRESS_CONSUMER_KEY=ck_xxxxxxxxxx
WORDPRESS_CONSUMER_SECRET=cs_xxxxxxxxxx

# OpenAI (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
OPENAI_API_KEY=sk-xxxxxxxxxx
```

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```env
# Redis (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
DEBUG=False
SECRET_KEY=your-secret-key
LOGIN_USERNAME=admin
LOGIN_PASSWORD=your-password

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
API_TIMEOUT=30
MAX_PRODUCTS_BATCH=1000
VERBOSE_LOGGING=False
```

–ü—Ä–∏–º–µ—Ä: [.env.example](.env.example)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
Poizon-WordPress-Sync/
‚îú‚îÄ‚îÄ web_app.py                        # –ì–ª–∞–≤–Ω–æ–µ Flask-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ poizon_api_fixed.py               # –ö–ª–∏–µ–Ω—Ç Poizon API
‚îú‚îÄ‚îÄ poizon_to_wordpress_service.py    # –°–µ—Ä–≤–∏—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ WordPress
‚îú‚îÄ‚îÄ image_processor.py                # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îú‚îÄ‚îÄ category_mapper.py                # –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
‚îÇ
‚îú‚îÄ‚îÄ unified_cache.py                  # üÜï 3-—É—Ä–æ–≤–Ω–µ–≤–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ circuit_breaker.py                # üÜï Circuit Breaker pattern
‚îú‚îÄ‚îÄ async_http_client.py              # üÜï Async HTTP client
‚îú‚îÄ‚îÄ celery_config.py                  # üÜï –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery
‚îú‚îÄ‚îÄ celery_tasks.py                   # üÜï –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
‚îÇ
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ index.html                    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø–æ–∏—Å–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ login.html                    # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
‚îÇ   ‚îî‚îÄ‚îÄ update.html                   # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤
‚îÇ
‚îú‚îÄ‚îÄ kash/                             # –î–∞–Ω–Ω—ã–µ –∏ –∫–µ—à
‚îÇ   ‚îú‚îÄ‚îÄ brands_cache.json             # –ö–µ—à –±—Ä–µ–Ω–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ *.log                         # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ
‚îú‚îÄ‚îÄ requirements.txt                  # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .env.example                      # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ
‚îú‚îÄ‚îÄ install.bat                       # ü™ü Windows —É—Å—Ç–∞–Ω–æ–≤–∫–∞
‚îú‚îÄ‚îÄ start_app.bat                     # ü™ü –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ start_redis.bat                   # ü™ü –ó–∞–ø—É—Å–∫ Redis
‚îú‚îÄ‚îÄ start_celery.bat                  # ü™ü –ó–∞–ø—É—Å–∫ Celery
‚îÇ
‚îú‚îÄ‚îÄ README.md                         # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ –†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md       # üìñ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
‚îú‚îÄ‚îÄ ARCHITECTURE_IMPROVEMENTS.md      # üèóÔ∏è –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π
‚îî‚îÄ‚îÄ ANALYSIS_REPORT.md                # üìä –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```

---

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤

```python
# –ß–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:
# –ö–∞—Ç–µ–≥–æ—Ä–∏—è ‚Üí –ë—Ä–µ–Ω–¥ ‚Üí –ü–æ–∏—Å–∫ ‚Üí –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤

# –ò–ª–∏ —á–µ—Ä–µ–∑ API:
GET /api/products/category/29/brand/Nike
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

- **–ö—É—Ä—Å –≤–∞–ª—é—Ç—ã**: 13.5 (—é–∞–Ω—å ‚Üí —Ä—É–±–ª—å)
- **–ù–∞—Ü–µ–Ω–∫–∞**: 5000 —Ä—É–±–ª–µ–π (–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫ –∫–∞–∂–¥–æ–º—É —Ç–æ–≤–∞—Ä—É)

**–ü—Ä–∏–º–µ—Ä —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã:**
```
–¶–µ–Ω–∞ –Ω–∞ Poizon: 500 ¬•
–ö—É—Ä—Å: 13.5
–ù–∞—Ü–µ–Ω–∫–∞: +5000 ‚ÇΩ

–ò—Ç–æ–≥–æ: (500 √ó 13.5) + 5000 = 11,750 ‚ÇΩ
```

### 3. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤

**–ß–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
1. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã (–≥–∞–ª–æ—á–∫–∏)
2. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å –≤ WordPress"
3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ß–µ—Ä–µ–∑ API:**
```javascript
POST /api/upload-stream
{
  "product_ids": [12345, 67890],
  "settings": {
    "currency_rate": 13.5,
    "markup_rubles": 5000
  }
}
```

### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

```javascript
GET /stream/<session_id>

// Server-Sent Events:
data: {"type": "product_start", "spu_id": 12345}
data: {"type": "progress", "stage": "gigachat"}
data: {"type": "product_done", "status": "completed"}
```

---

## üö¶ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏

```bash
# –û—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥
tail -f kash/app.log

# –õ–æ–≥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
tail -f kash/poizon_sync.log

# Celery worker (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
celery -A celery_tasks worker --loglevel=debug
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∞

```python
from unified_cache import get_cache

cache = get_cache()
stats = cache.get_stats()

print(f"Hits: {stats['hits']}")
print(f"Misses: {stats['misses']}")
print(f"Hit Rate: {stats['hit_rate']:.1%}")
```

### Circuit Breaker —Å–æ—Å—Ç–æ—è–Ω–∏–µ

```python
from circuit_breaker import get_circuit_breaker

breaker = get_circuit_breaker('poizon_api')
stats = breaker.stats()

print(f"State: {stats['state']}")
print(f"Failures: {stats['failure_count']}")
```

---

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 1. –í–∫–ª—é—á–∏—Ç–µ Redis (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**Windows:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Memurai: https://www.memurai.com/get-memurai
# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ: start_redis.bat
```

**Linux:**
```bash
sudo apt install redis-server
sudo systemctl start redis
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 4-6x —É—Å–∫–æ—Ä–µ–Ω–∏–µ, -85% –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Celery Worker

```bash
# Windows
start_celery.bat

# Linux
celery -A celery_tasks worker --loglevel=info
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –§–æ–Ω–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞, –¥–æ 1000 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ä–∞–∑

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—É–ª—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

```env
# .env
MAX_PRODUCTS_BATCH=100
API_TIMEOUT=30
```

---

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: `ModuleNotFoundError: No module named 'flask'`

**–†–µ—à–µ–Ω–∏–µ**:
```bash
pip install -r requirements.txt
```

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞**: `ConnectionError: Error connecting to Redis`

**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ —Ñ–∞–π–ª–æ–≤—ã–π –∫–µ—à.  
–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Redis: –∑–∞–ø—É—Å—Ç–∏—Ç–µ `redis-server` –∏–ª–∏ `start_redis.bat`

### –¢–æ–≤–∞—Ä—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∞ 401/403 –æ—Ç WordPress

**–†–µ—à–µ–Ω–∏–µ**:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `WORDPRESS_CONSUMER_KEY` –∏ `WORDPRESS_CONSUMER_SECRET`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ WooCommerce –≤–∫–ª—é—á–µ–Ω REST API
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –Ω–∞ –∑–∞–ø–∏—Å—å)

### –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–†–µ—à–µ–Ω–∏–µ**:
1. –í–∫–ª—é—á–∏—Ç–µ Redis
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Celery Worker
3. –£–º–µ–Ω—å—à–∏—Ç–µ `MAX_PRODUCTS_BATCH` –¥–æ 50-100

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: [–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md](–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md#-—á–∞—Å—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md](–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö
- **[ARCHITECTURE_IMPROVEMENTS.md](ARCHITECTURE_IMPROVEMENTS.md)** - –û–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã—Ö —É–ª—É—á—à–µ–Ω–∏–π
- **[ANALYSIS_REPORT.md](ANALYSIS_REPORT.md)** - –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –º–µ—Ç—Ä–∏–∫–∏

---

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

Contributions are welcome! –ü–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. Fork –ø—Ä–æ–µ–∫—Ç
2. –°–æ–∑–¥–∞–π—Ç–µ feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add AmazingFeature'`)
4. Push –≤ branch (`git push origin feature/AmazingFeature`)
5. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT. –°–º. —Ñ–∞–π–ª `LICENSE` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –¥–∏—Å–∫–ª–µ–π–º–µ—Ä

- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –¥–ª—è **–ª–µ–≥–∞–ª—å–Ω—ã—Ö —Ü–µ–ª–µ–π**
- ‚úÖ –°–æ–±–ª—é–¥–∞–π—Ç–µ **—É—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è** Poizon, WordPress, OpenAI API
- ‚ö†Ô∏è –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è **"–∫–∞–∫ –µ—Å—Ç—å"**, –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–π
- ‚ö†Ô∏è –ê–≤—Ç–æ—Ä –Ω–µ –Ω–µ—Å–µ—Ç –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API —Ç—Ä–µ—Ç—å–∏—Ö —Å—Ç–æ—Ä–æ–Ω

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ e-commerce

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ò–∑—É—á–∏—Ç–µ [–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md](–†–£–ö–û–í–û–î–°–¢–í–û_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø.md)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–¥–µ–ª [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫](#-—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–Ω–µ–ø–æ–ª–∞–¥–æ–∫)
3. –û—Ç–∫—Ä–æ–π—Ç–µ Issue –≤ GitHub

---

**‚≠ê –ü–æ—Å—Ç–∞–≤—å—Ç–µ –∑–≤–µ–∑–¥—É, –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –±—ã–ª –ø–æ–ª–µ–∑–µ–Ω!**
